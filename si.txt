public ControllerCrearTx(BasePageWeb parentPage) throws Exception {

    this.pageTitle = parentPage.getTitle();
    pagePortalPymes = new PagePortalPymes(parentPage);
    pageOrigen = new PageOrigen(parentPage);
    pageDestino = new PageDestino(parentPage);
    pageValores = new PageValores(parentPage);
    pageConf = new PageConfirmacion(parentPage);

    pageConsultasyExtractos = new PageConsultasyExtractos(parentPage);
    pagePendApr = new PagePendAprobacion(parentPage);
    pageAprobInter = new PageAprobacionInter(parentPage);

    // Datos Globales
    if (SettingsRun.getTestData().parameterExist("Servicio")
            && !SettingsRun.getTestData().getParameter("Servicio").trim().isEmpty()) {
        this.servicio = SettingsRun.getTestData().getParameter("Servicio").trim();

    if (SettingsRun.getTestData().parameterExist("Tipo prueba")
            && !SettingsRun.getTestData().getParameter("Tipo prueba").trim().isEmpty()) {
        this.tipoPrueba = SettingsRun.getTestData().getParameter("Tipo prueba").trim();
    } else {
        this.tipoPrueba = "Tx En Línea";
    }

    if (SettingsRun.getTestData().parameterExist("Adenda")
            && !SettingsRun.getTestData().getParameter("Adenda").trim().isEmpty()) {
        this.adenda = SettingsRun.getTestData().getParameter("Adenda").trim();
    } else {
        this.adenda = "NO";
    }

    if (SettingsRun.getTestData().parameterExist("Números de Aprobaciones")
            && !SettingsRun.getTestData().getParameter("Números de Aprobaciones").trim().isEmpty()) {
        this.numAprobaciones = SettingsRun.getTestData().getParameter("Números de Aprobaciones").trim();
    } else {
        this.numAprobaciones = "1";
    }
    this.unaFirma = this.numAprobaciones.equals("1");

    if (SettingsRun.getTestData().parameterExist("Nivel de Riesgo BC")
            && !SettingsRun.getTestData().getParameter("Nivel de Riesgo BC").trim().isEmpty()) {
        this.riesgoBc = SettingsRun.getTestData().getParameter("Nivel de Riesgo BC").trim();
    } else {
        this.riesgoBc = "";
    }

    if (SettingsRun.getTestData().parameterExist("Nivel de Riesgo SAS EFM")
            && !SettingsRun.getTestData().getParameter("Nivel de Riesgo SAS EFM").trim().isEmpty()) {
        this.riesgoEfm = SettingsRun.getTestData().getParameter("Nivel de Riesgo SAS EFM").trim();
    } else {
        this.riesgoEfm = "";
    }

    if (SettingsRun.getTestData().parameterExist("Navegador")
            && !SettingsRun.getTestData().getParameter("Navegador").trim().isEmpty()) {
        this.navegador = SettingsRun.getTestData().getParameter("Navegador").trim();
    } else {
        this.navegador = "CHROME";
    }

    if (SettingsRun.getTestData().parameterExist("Nombre Empresa")
            && !SettingsRun.getTestData().getParameter("Nombre Empresa").trim().isEmpty()) {
        this.nombreEmpre = SettingsRun.getTestData().getParameter("Nombre Empresa").trim();
    }

    if (SettingsRun.getTestData().parameterExist("Numero ID Empresa")
            && !SettingsRun.getTestData().getParameter("Numero ID Empresa").trim().isEmpty()) {
        this.nitEmpre = SettingsRun.getTestData().getParameter("Numero ID Empresa").trim();
    }

    if (SettingsRun.getTestData().parameterExist("Tipo ID Empresa")
            && !SettingsRun.getTestData().getParameter("Tipo ID Empresa").trim().isEmpty()) {
        this.tipoIdEm = SettingsRun.getTestData().getParameter("Tipo ID Empresa").trim();
    } else {
        this.tipoIdEm = "NIT";
    }

    if (SettingsRun.getTestData().parameterExist("Tipo producto origen / Franquicia")
            && !SettingsRun.getTestData().getParameter("Tipo producto origen / Franquicia").trim().isEmpty()) {
        this.tipoCta = SettingsRun.getTestData().getParameter("Tipo producto origen / Franquicia").trim();
    }

    if (SettingsRun.getTestData().parameterExist("Número producto origen")
            && !SettingsRun.getTestData().getParameter("Número producto origen").trim().isEmpty()) {
        this.numCta = SettingsRun.getTestData().getParameter("Número producto origen").trim();
    } 

    if (SettingsRun.getTestData().parameterExist("Hash")
            && !SettingsRun.getTestData().getParameter("Hash").trim().isEmpty()) {
        this.uuid = SettingsRun.getTestData().getParameter("Hash").trim();
    } else {
        this.uuid = "";
    }

    if (SettingsRun.getTestData().parameterExist("Descripcion")
            && !SettingsRun.getTestData().getParameter("Descripcion").trim().isEmpty()) {
        this.descripcionsin = SettingsRun.getTestData().getParameter("Descripcion").trim();
    } else {
        this.descripcionsin = "";
    }

    if (SettingsRun.getTestData().parameterExist("Valor a Pagar / Transferir")
            && !SettingsRun.getTestData().getParameter("Valor a Pagar / Transferir").trim().isEmpty()) {
        this.valorsin = SettingsRun.getTestData().getParameter("Valor a Pagar / Transferir").trim();
        this.valorcon = SettingsRun.getTestData().getParameter("Valor a Pagar / Transferir");
    } else {
        this.valorsin = "1";
        this.valorcon = "1";
    }

    if (SettingsRun.getTestData().parameterExist("Referencia")
            && !SettingsRun.getTestData().getParameter("Referencia").trim().isEmpty()) {
        this.referenciasin = SettingsRun.getTestData().getParameter("Referencia").trim();
    } else {
        this.referenciasin = "";
    }

    if (SettingsRun.getTestData().parameterExist("Desde_el_Detalle")
            && !SettingsRun.getTestData().getParameter("Desde_el_Detalle").trim().isEmpty()) {
        this.desdeElDetalle = SettingsRun.getTestData().getParameter("Desde_el_Detalle").trim();
    } else {
        this.desdeElDetalle = "NO";
    }

    // INGRESO DE LA REFERENCIA
  	if (!this.servicio.contains("Nómi") && !this.servicio.contains("Proveedores")) {
			this.referencia1 = SettingsRun.getTestData().getParameter("Referencia1 / Tipo Producto Destino").trim();
			this.referencia2 = SettingsRun.getTestData().getParameter("Referencia2 / Número Producto Destino").trim();

		}

		if (this.servicio.contains("Pagos Automaticos") || this.servicio.contains("Servicios"))
			this.numConvenio = SettingsRun.getTestData().getParameter("Número de Convenio").trim();

		if (this.servicio.contains("Pagos Automaticos")) {
			this.diaDiaDelpago = SettingsRun.getTestData().getParameter("Día del pago").trim();
			this.titul = SettingsRun.getTestData().getParameter("Nombre del Titular").trim();
			this.tipoCtaSecundario = SettingsRun.getTestData().getParameter("Tipo producto origen Secundario").trim();
			this.numCtaSecundario = SettingsRun.getTestData().getParameter("Número producto origen Secundario").trim();
		}

    // CUENTA NO INSCRITA / INSCRITA
if (this.servicio.contains("Cuenta No Inscrita") || this.servicio.contains("Cuenta Inscrita")) {

			this.bncoDest = SettingsRun.getTestData().getParameter("Banco Destino").trim();

			if (this.servicio.contains("Cuenta No Inscrita")) {
				this.titul = SettingsRun.getTestData().getParameter("Nombre del Titular").trim();
				this.tipoid = SettingsRun.getTestData().getParameter("Tipo Identificación del Titular").trim();
				this.numid = SettingsRun.getTestData().getParameter("Número Identificación del Titular").trim();
			}
		}

		if (this.servicio.contains("Avance TC")) {
			this.mesTC = SettingsRun.getTestData().getParameter("Mes Vencimiento TC").trim();
			this.avenTC = SettingsRun.getTestData().getParameter("Año Vencimiento TC").trim();
			this.plazoDiAv = SettingsRun.getTestData().getParameter("Plazo a diferir el avance").trim();
		}

		// Divisas
		if (this.servicio.contains("Tx Internacionales Recibir desde el exterior")
				|| this.servicio.contains("Tx Internacionales Enviar al exterior")) {
			this.numerodereferenciaExterna = SettingsRun.getTestData().getParameter("Número de referencia Externa")
					.trim();
			pageDivisas = new PageDivisas(parentPage);
			pageEnviarTransInternacional = new PageEnviarTransInternacional(parentPage);
			pageRecibirTransferenciasInternacionales = new PageRecibirTransferenciasInternacionales(parentPage);
			pageDocumentos_Y_Formularios = new PageDocumentos_Y_Formularios(parentPage);
			pageConsultatxInternacional = new PageConsultatxInternacional(parentPage);

			this.tipoMoneda = SettingsRun.getTestData().getParameter("Tipo Moneda");
			this.modena = SettingsRun.getTestData().getParameter("Tipo Moneda").trim();
			this.concepTx = SettingsRun.getTestData().getParameter("Concepto de la transferencia").trim();
			this.concepto = SettingsRun.getTestData().getParameter("Concepto de la transferencia");
			this.valorNumeral1 = SettingsRun.getTestData().getParameter("Valor numeral cambiario 1");
			this.valorNumeral2 = SettingsRun.getTestData().getParameter("Valor numeral cambiario 2");
			this.tipoEnvio = SettingsRun.getTestData().getParameter("Tipo de Envio");
			this.FechaEnvioFrecuente = SettingsRun.getTestData().getParameter("Fecha envío frecuente");
			this.nombreBene = SettingsRun.getTestData()
					.getParameter("Ordenante / Nombre del beneficiario en el exterior");
			this.paisDestino = SettingsRun.getTestData().getParameter("País de destino de la transferencia");
			this.ciudadDestino = SettingsRun.getTestData()
					.getParameter("Ciudad y país donde está ubicado el beneficiario");
			this.direccionBene = SettingsRun.getTestData().getParameter("Dirección del beneficiario");
			this.cuentaBene = SettingsRun.getTestData().getParameter("Número de cuenta, IBAN o CLABE");
			this.infoPago = SettingsRun.getTestData().getParameter("Información para el beneficiario");
			this.referenciaPago = SettingsRun.getTestData().getParameter("Información para el beneficiario Numero");

			this.tipoCodigo = SettingsRun.getTestData().getParameter("Tipo de código");
			this.numeroCodigo = SettingsRun.getTestData().getParameter("Número de código");
			this.intermediario = SettingsRun.getTestData().getParameter("Requiere un banco intermediario");
			this.tipoCodigoInter = SettingsRun.getTestData().getParameter("Tipo de código Intermediario");
			this.numeroCodigoInter = SettingsRun.getTestData().getParameter("Número de código Intermediario");

		}
    
    if (SettingsRun.getTestData().parameterExist("Tiempo de Consulta")
            && !SettingsRun.getTestData().getParameter("Tiempo de Consulta").trim().isEmpty()) {
        this.tipoConstaTxRealizadas = SettingsRun.getTestData().getParameter("Tiempo de Consulta").trim();
    } 
    if (SettingsRun.getTestData().parameterExist("Fecha tx")
            && !SettingsRun.getTestData().getParameter("Fecha tx").trim().isEmpty()) {
        this.fecha = SettingsRun.getTestData().getParameter("Fecha tx").trim();
    } 
    if (SettingsRun.getTestData().parameterExist("Hora tx")
            && !SettingsRun.getTestData().getParameter("Hora tx").trim().isEmpty()) {
        this.hora = SettingsRun.getTestData().getParameter("Hora tx").trim();
    }
    if (SettingsRun.getTestData().parameterExist("Tipo Moneda")
            && !SettingsRun.getTestData().getParameter("Tipo Moneda").trim().isEmpty()) {
        this.moneda = SettingsRun.getTestData().getParameter("Tipo Moneda").trim();
    } else {
        this.moneda = "";
    }

    if (!DatosDavivienda.IS_RISKMOTOR) {
        nombreAmbiente = SettingsRun.getGlobalData("AMBIENTE_PYME");

        switch (nombreAmbiente) {
        case "1":
        case "PROYECTOS":
            nombreAmbiente = "PROYECTOS";
            break;
        case "2":
        case "CONTENCION":
            nombreAmbiente = "CONTENCION";
            break;
        case "3":
        case "OBSOLESCENCIA":
            nombreAmbiente = "OBSOLESCENCIA";
            break;
        case "4":
        case "ONPREMISE":
            nombreAmbiente = "ONPREMISE";
            break;
        case "5":
        case "POST_NUBE":
            nombreAmbiente = "POST_NUBE";
            break;
        case "6":
        case "CONTENCION_NUBE":
            nombreAmbiente = "CONTENCION_NUBE";
            break;
        case "7":
        case "PROYECTOS_NUBE":
            nombreAmbiente = "PROYECTOS_NUBE";
            break;
        case "8":
        case "MEJORAS":
            nombreAmbiente = "MEJORAS";
            break;
        default:
            Reporter.reportEvent(Reporter.MIC_FAIL, "Opción no válida");
            break;
        }
    }

}
